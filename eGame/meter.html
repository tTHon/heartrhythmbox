<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="box coral.png" type="image/png" sizes="60x60">
    <meta name="author" content="t'Thon">
    <title>eGame-dashboard</title>
    <script src="https://kit.fontawesome.com/2c3e1e841c.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
  </head>

<style>
  * {background-color:#333;font-family: 'Raleway', sans-serif;margin: 0;}
</style>

<body>

  <canvas id="canvas">
  </canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const vw = window.innerWidth/100;
const vh = window.innerHeight/100;
const meterU = 5*vh;
const meterNo = 3;const scale = 10;
const meterPad = vh;
const meterBlock = 100*vw/(meterNo);
const meterW = meterBlock/3;
const baseY = 75*vh;
var meterX = getMetersPosition();

createCanvas();
console.log(meterX);
drawMeter();

//find coordinates to place each meter
function getMetersPosition(){
  var array = [];

  //get X position
  for (let index = 0; index < meterNo; index++) {
      var x = meterBlock*index + ((meterBlock-meterW)/2);  
      array.push(x);
    }
  return array;

}

function drawMeter(){
    //draw meter block
    for (let index = 0; index < meterNo; index++) {
      ctx.beginPath();
      ctx.rect(meterX[index],baseY-(scale*(meterU+meterPad)),meterW,scale*(meterU+meterPad)-meterPad)
      ctx.fillStyle = '#222';ctx.fill();
      ctx.closePath();
      
      //draw meter unit
      for (let j = scale; j >0; j=j-1) {
        ctx.beginPath();
        ctx.rect(meterX[index],baseY-(j*(meterU+meterPad)),meterW,meterU);
        ctx.fillStyle = 'black';ctx.fill();
        ctx.font = '24px Raleway';
        ctx.textAlign = 'right';
        ctx.fillStyle = '#ababab';
        ctx.fillText(j,meterX[index]-10,(baseY-(j*(meterU+meterPad)))+0.75*meterU);
        ctx.closePath();
      }
    }
}

function meterMove(mNo,start,end){
  
}

function createCanvas() {
  const scale = window.devicePixelRatio;
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  canvas.width = Math.floor(window.innerWidth * scale*2)
  canvas.height = Math.floor(window.innerHeight * scale*2)
  ctx.scale(scale*2,scale*2)
}


</script>

</body>
</html>
