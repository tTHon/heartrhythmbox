<!DOCTYPE html>
<html>
<body>
<div id="demo"></div>
<canvas id="canvas">
</canvas>

<script>
var canvas = document.getElementById("canvas");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
var ctx = canvas.getContext("2d");
var vw = window.innerWidth/100;
var vh = window.innerHeight/100;
var radius = 30*vw;
var centerX = 50*vw;var centerY= 40*vw;

//nav
window.addEventListener("keydown", function(event) {
    event.preventDefault();
    if (event.keyCode===32) {
      moveHand(0,90)
           }
})

drawFace();
drawHand(22.5);


function drawFace() {
  //document.getElementById('demo').innerHTML = radius;

  //red
  ctx.beginPath();
  ctx.arc(50*vw, 40*vw, radius, Math.PI, 1.25*Math.PI);
  ctx.fillStyle = 'red';
  ctx.lineTo(50*vw, 40*vw)
  ctx.fill();

  //orange
  ctx.beginPath();
  ctx.arc(50*vw, 40*vw, radius, 1.25*Math.PI, 1.5*Math.PI);
  ctx.fillStyle = 'orange';
  ctx.lineTo(50*vw, 40*vw)
  ctx.fill();

//yellow
ctx.beginPath();
  ctx.arc(50*vw, 40*vw, radius, 1.5*Math.PI, 1.75*Math.PI);
  ctx.fillStyle = 'yellow';
  ctx.lineTo(50*vw, 40*vw)
  ctx.fill();

//green
  ctx.beginPath();
  ctx.arc(50*vw, 40*vw, radius, 1.75*Math.PI, 2*Math.PI);
  ctx.fillStyle = 'green';
  ctx.lineTo(50*vw, 40*vw)
  ctx.fill();

  //draw center
  ctx.beginPath();
  ctx.arc(50*vw, 40*vw, radius*0.1, 0, 2*Math.PI);
  ctx.fillStyle = '#333';
  ctx.fill();
}

function drawHand(degree) {
    var length = 28*vw;
    ctx.beginPath();
    ctx.lineWidth = vw;
    ctx.lineCap = "round";
    xEnd = length*Math.cos(Math.PI*degree/180);
    yEnd = length*Math.sin(Math.PI*degree/180);
    ctx.moveTo(50*vw, 40*vw);
    ctx.lineTo(50*vw+xEnd,40*vw-yEnd);
    ctx.strokeStyle = '#333'
    ctx.stroke();
}

function moveHand(degreeS,degreeEnd){

  //go2End+2
    var distance = (degreeEnd-degreeS)+5;
    var tEnd=1;
    var moveInterval=setInterval(function(){
      clearCenter();
      drawFace();
      drawHand(degreeS+tEnd)
      tEnd++;
      if (tEnd>=distance){
      clearInterval(moveInterval)
      shakeMinus();
      shakePlus();
    }
    },10*tEnd/distance)

  
  
  //shake-2
  function shakeMinus(){
  var tBack=1;
  var shakeBack=setInterval(function(){
    clearCenter();
    drawFace();
    drawHand((degreeEnd+5)-tBack)
    tBack++;
    if (tBack>=10){
    clearInterval(shakeBack)
    }
  },tBack)
  }

  //shake+2
  function shakePlus(){
  var tFwd=1;
  var shakeFwd=setInterval(function(){
    clearCenter();
    drawFace();
    drawHand((degreeEnd-5)+tFwd)
    tFwd++;
    if (tFwd>=10){
    clearInterval(shakeFwd)
    clearCenter();
    drawFace();
    drawHand(degreeEnd)
    }
  },tFwd*50)
  }

}

function clearCenter(){
  ctx.clearRect(centerX-radius,centerY-radius,centerX+radius,centerY+radius)
}

</script>

</body>
</html>
