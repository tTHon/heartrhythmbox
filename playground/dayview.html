<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">

<style>
    * {font-family: 'Rubik', sans-serif;color: #ddd;box-sizing: border-box;}
    #dayTable {display:block;overflow-y: scroll;border: #bbb 1px solid;width: 90vw;margin-left: auto;margin-right: auto;
        position: relative;}
    #header {position: sticky;top:0;z-index:1;background-color: aquamarine;}
    #header th {font-size: 2.5vmax;color: #333;cursor: pointer;}
    #dateCol, #roomCol {cursor: pointer;}
    .dateMenu,.roomMenu {position: absolute;background-color: #232323;padding: 0;margin: 0;list-style-type: none;
    box-shadow: 2px 4px 4px 4px rgba(100,100,100,0.5);}
    .dateList, .roomList {border-bottom: 1px #555 solid;font-size: 2vmax;
        padding: 3vh 0;}
    .dateList:hover, .roomList:hover {background-color: black;}
    .timeLine {text-align: right;}
    .lineDiv {height: 1px;background-color:  #555;margin: 0;padding: 0;}
   
</style>
<body style="background-color: #333;">
    <div id="title" style="text-align: center;padding: 5vh 2vw;">
        <div id="meetingName" style="font-size: 4vmax;color:aquamarine;">Meeting Name</div>
        <div id="meetingDate" style="font-size: 3vmax;color:aquamarine;">Meeting Date</div>
    </div>


    <table id="dayTable">
        <tr id="header">
            <th id="dateCol" onclick="showDateMenu()">DATE&nbsp;&bigtriangledown;</th>
            <th id="roomCol" onclick="showRoomMenu()">ROOM&nbsp;&bigtriangledown;</th>
        </tr>
    </table>




<script>

//set up screen viewpoint
vw = screen.width/100;vh = screen.height/100;
vmax = getVmax();

//demo date & room
day1 = new Date(2024,01,16)
day2 = new Date(2024,01,17)
day3 = new Date(2024,01,18)
var dates = [day1,day2,day3]
var rooms = ['Upper Floor','Lower Floor','Add/Edit']

setupTable()

function showDateMenu(){
    const table = document.getElementById('dayTable')
    const head = document.getElementById('dateCol')
    const top = head.offsetTop + 10*vh;
    const left = head.offsetLeft + 0.5*vw;
    const width = head.offsetWidth - vw;

    //to show menu or not
    const menu = document.getElementsByClassName('dateMenu')
    const list = document.getElementsByClassName('dateList')

    if (menu.length==0){
        const newList = document.createElement('div')
        head.appendChild(newList)
        newList.className = 'dateMenu'
        newList.style.visibility = 'visible'

        //get coordinate
        newList.style.top = top + 'px';newList.style.left = left + 'px'
        newList.style.width = width+'px'
        }
    else {
        if (menu[0].style.visibility =='visible'){
            menu[0].style.visibility = 'hidden'
        } 
        else {
            menu[0].style.visibility = 'visible'}
    }

 
    //to add items or not
    if (dates.length>list.length){
        var diff = dates.length - list.length;
        var start = (dates.length - diff)-1;

        for (let index = start+1; index < dates.length; index++) {
            const newLi = document.createElement('li')
            menu[0].appendChild(newLi)
            newLi.style.width = width + 'px';
            newLi.className = 'dateList'
            //format date
            var date2Show = dates[index].toLocaleDateString("en-GB",{year: "2-digit",month:"short",day:"numeric"});
            newLi.innerHTML = date2Show
        }
    }


    //date click
    for (let index = 0; index < list.length; index++) {
        list[index].onclick = function(){
            const date2Show = dates[index].toLocaleDateString("en-GB",{year: "2-digit",month:"short",day:"numeric"});
            head.innerHTML = date2Show + '&#9661;';
            showDateMenu();
        }
    }
}


function setupTable(){
    //one hour equal to 3vh + header of 9vh
    const oneHour = 9*vh;
    
    //table will show only 8 hour; overflow --scroll
    const dayTable = document.getElementById('dayTable');
    dayTable.style.height = (8*oneHour) + 9*vh + 'px';
    //header height and width
    const head = document.getElementById('header')
    head.style.height = 9*vh + 'px';
    //console.log(dayTable.rows[0].cells.length)
    const colPad = 1*vmax;
    dateColW = 2.5*vmax*9 + colPad;
    dayTable.rows[0].cells[0].style.width = dateColW + 'px';
    dayTable.rows[0].cells[1].style.width = 90*vw - dateColW + 'px'
    
    //create 24hr row
    for (let index = 0; index <= 24; index++) {
        const newRow = document.createElement('tr')
        dayTable.appendChild(newRow)
        newRow.style.height = oneHour + 'px'
        const newCell0 = document.createElement('td')
        newRow.appendChild(newCell0)
        const newCell1 = document.createElement('td')
        newRow.appendChild(newCell1)
        newCell0.innerHTML = index;newCell0.className = 'timeLine'
        
        //add line in cell1
        const newDiv = document.createElement('div')
        newDiv.className = 'lineDiv'
        newCell1.appendChild(newDiv)
    }

    dayTable.rows[8].scrollIntoView();
}

function getVmax(){
    var vmax;
    if (vw>vh) {vmax = vw} else {vmax = vh}
    return vmax;
}

</script>

</body>

</html>