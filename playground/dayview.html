<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">

<style>
    * {color: #ddd;font-family: 'Rubik', sans-serif;}
    #meetingName, #meetingDate {color:aquamarine;}
    button {cursor: pointer;border-radius: 0.5vw;padding: 1vw;font-family: 'Rubik', sans-serif;font-weight: 400;}
    #dayTable{max-width: 90vw;width: fit-content;margin-left: auto;margin-right: auto;margin-top: 9vh;background-color: none;
    text-align: center;display: block;overflow: scroll;border-collapse:collapse;}
    #headerRow th {background: pink;border: #ddd solid 0.2vmax;color: #333;}
    #headerRow button {background: pink;border: none;color: #333;font-size: 2.2vmax;}
    #dateCol, .roomCol, #dayTable td {border-right: 1px solid #ddd;}
    #dateCol {min-width: 20vw;}
    #roomCol {min-width: 60vw;cursor: pointer;}
    .timeLine {cursor: pointer;}
    #dateMenu, #roomMenu {display: none;position: absolute;z-index: 1;
        border-radius: 1vw;box-shadow: 0px 10px 20px 0px rgba(0,0,0,0.4);}
    #dateMenu :hover, #roomMenu :hover {background-color: black;}
    .dateList,.roomList {padding: 0.5vw;cursor: pointer;font-size: 2vmax;font-weight: 400;
        border-bottom: #555 solid 1px;background-color: #444;}    

    .mobileOnly {display: none;}
    @media only screen and (max-width: 768px) {
        .noMobile {display: none;}
        .mobileOnly {display: table;}
    }
    .sticky {position: sticky;top: 0;z-index: 1;}

</style>
</head>

<body style="background-color: #333;">
    <h1 id="meetingName" style="text-align: center;">Meeting Name</h1>
    <h3 id="meetingDate" style="text-align: center;">Meeting Date</h3>
    <table id="dayTable">
        <tr id="headerRow" class="sticky">
            <th id="dateCol">
                <button onclick="displayDateList()">Date&nbsp;&#9662;</button>
                <div id="dateMenu">
                    <div class="dateList">Date1</div>        
                    <div class="dateList">Date2</div>
                </div>
            </th>
            <th id="roomCol">
                <button onclick="displayRoomList()">Room&nbsp;&#9662;
                </button>
                <div id="roomMenu">
                    <div class="roomList">Room1</div>        
                    <div class="roomList">Room2</div>
                    <div class="roomList">Add/Edit</div>
                </div>
            </th>
        </tr>

    </table>

    
<script>

vh = (screen.height)/100
tenMin = 1.5*vh
const dayTable = document.getElementById('dayTable')
dayTable.style.height = tenMin*6*9+'px'
document.getElementById('headerRow').style.height = tenMin*3+'px'
showHour()

//hideMenu onscroll
dayTable.onscroll=function(){hideMenu();}


function showHour(){
    //hour view
    for (let index = 0; index < 48; index=index+0.5) {
        const newRow = document.createElement('tr')
        const parent = document.getElementById('dayTable')
        parent.appendChild(newRow)
        newRow.style.height = tenMin*3 + 'px'
        newRow.className = 'thirtyMinutes'

        for (let j = 0; j <= 1; j++) {
            var newD = document.createElement('td')
            newRow.appendChild(newD)

            if (j==0)
                {
                newD.className = 'timeLine'
                if (index%1==0){
                    newDay = new Date()
                    newDay.setHours(index,0);
                    var options = { hour: '2-digit', minute: '2-digit' };
                    time = newDay.toLocaleString('en-US', options)
                    newRow.style.borderTop = 'solid 1px #ddd'
                    newD.innerHTML = time
                    }
                }
            else {
                newD.innerHTML = 'room'+j;
                newD.className = 'roomCol';
                }
            newD.style.height = tenMin*3+'px'
            newD.style.borderLeft = 'solid #ddd 1px'
            newD.style.cursor = 'pointer'
            newD.onclick = function(){timeBlock(index)}
        }
      
        if (index==16){
            newRow.scrollIntoView();
        }
    }

}



function displayDateList(){
    var menu = document.getElementById('dateMenu')
    var width = document.getElementById('dateCol').clientWidth

    //hide room menu
    document.getElementById('roomMenu').style.display = 'none'

    if (menu.style.display == 'block'){
        menu.style.display = 'none'
    } else {
        menu.style.display = 'block'
        menu.style.width = width-5 + 'px'
    }
}

function displayRoomList(){
    var menu = document.getElementById('roomMenu')
    var width = document.getElementById('roomCol').clientWidth

    //hide date menu
    document.getElementById('dateMenu').style.display = 'none'

    if (menu.style.display == 'block'){
        menu.style.display = 'none'
    } else {
        menu.style.display = 'block'
        menu.style.width = width-5 + 'px'
    }
}

function hideMenu(){
    var date = document.getElementById('dateMenu')
    var room = document.getElementById('roomMenu')
    date.style.display = 'none'
    room.style.display = 'none'
}


function timeBlock(row){
    var time = document.getElementsByClassName('thirtyMinutes')
        
    //clear
    for (let index = 0; index < time.length; index++) {
        time[index].style.background = '#333'        
    }

    time[row*2].style.background = 'white'
}


</script>

</body>
</html>