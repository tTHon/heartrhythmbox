<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treatment of Reflex Syncope</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">

<style>
    * {margin: 0;};
    .block {width: 100%;;};
    /*color*/
    .darkBlue {background-color: #082b3a}
    .indigo {background-color: #1c444c}
    .yellow {background-color: #f2cf49}
    .orange {background-color: #E36E53}
    .cyan {background-color: #3F9DA4;}

    #title {
        color: pink;
        font-size: 6vmax;text-align: center;
        font-family: 'Quicksand', sans-serif;
        letter-spacing: 1px;
    }
    #subTitle {
        color: #e2fcff;
        text-align: center;
        font-size: 2.5vmax;
        letter-spacing: 5px;
        font-family: 'Quicksand', sans-serif;
    }
    #logoPanel {
        padding-top: 5vmax;text-align: center;
        font-family: 'Quicksand', sans-serif;
        color: #888;font-size: 1.5vmax;
    }
    .topic {
        font-family: 'Quicksand', sans-serif;
        color: #e2fcff;font-size: 3vmax;
        text-align: center;
    }
    .ref, .ref a {
        padding: 2vmax;
        font-family: 'Quicksand', sans-serif;
        color: #888;font-size: 1.5vmax;text-align: center;
    }
    #brainCord {
        display: flex;
        color: #e2fcff;font-size: 2vmax;text-align: center;
        font-family: 'Quicksand', sans-serif;
    }
    #brainCord img {width:70%};
    #brainCord div {vertical-align: center;}
</style>

</head>
<body>
    <div class="block" style="background: radial-gradient(ellipse at bottom, #1b2735 0%, #082b3a 100%);height: 100vh;">
        <canvas class="canvas">
        </canvas>
        <div id="subTitle">
            Management of
        </div>
        <div id="title">
            REFLEX SYNCOPE
        </div>
        <div id="logoPanel">
            <img src="boxGreyRect.png" style="width: 2vmax;">
            <span style="vertical-align: 5px;">heartRhythmBox.com</span>
        </div>
    </div>

    <!--sym/parasym interplay-->
    <div class="block" style="background: radial-gradient(ellipse at bottom, #1b2735 0%, #082b3a 100%)">
        <div class="topic">The Interplay between sym- & parasympathetic system</div>
        <canvas class="canvas">
        </canvas>
    </div>

    <!--syncope vs SCD -- cerebral blood flow-->
    <div class="block" style="background-color: #232323;">
        <div class="topic" style="padding-top:3vmax;">
            The thin line between Syncope and Sudden Cardiac Death
        </div>
        <canvas class="canvas"></canvas>
        <div id="brainCord">
            <div>A<br>
                <img src="media\brainCordA.png">
            </div>
            <div>B<br>
                <img src="media\brainCordB.png">
            </div>
            <div>C<br>
                <img src="media\brainCordC.png">
            </div>
            <div>D<br>
                <img src="media\brainCordD.png">
            </div>
            <div>
                <img src="media\label.png" style="width: 100%;">
            </div>
        </div>
        <div class="ref">
            <a href="https://doi.org/10.3389/fcvm.2020.00036" target="_blank">
                Front Cardiovasc Med 2020.
            </a>
        </div>
    </div>
    
<script>
const block = document.getElementsByClassName('block');
const canvas = document.getElementsByClassName('canvas')
const vw = Math.round(window.innerWidth/100);
const vh = Math.round(window.innerHeight/100);
const vmin = Math.min(vw,vh)
canvas0();
canvas1();
canvas2();

function canvas2(){
    const ctx = canvas[2].getContext("2d");
    const scale = window.devicePixelRatio;
    canvas[2].style.width = window.innerWidth + 'px';
    canvas[2].style.height = 50*vmin + 'px';
    canvas[2].width = Math.floor(window.innerWidth * scale*1);
    canvas[2].height = Math.floor(50*vmin * scale*1);
    ctx.scale(scale*1,scale*1);

    const centerX = 50*vw;const centerY = 10*vh;
    const radius = 35*vmin;
    const angle1 = 45/180 * Math.PI;
    const angle2 = 25/180 * Math.PI;
    const h = Math.sin(angle1)*radius

    document.getElementById('brainCord').style.marginLeft = radius/2 + 'px';
    document.getElementById('brainCord').style.marginRight = radius/2 + 'px';

    //A to D
    ctx.beginPath();
    ctx.moveTo(centerX - Math.cos(angle2)*radius,centerY);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY);
    ctx.moveTo(centerX - Math.cos(angle2)*radius,centerY + h);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY + h);
    ctx.strokeStyle = '#eee';ctx.lineWidth = 3;
    ctx.stroke();

    ctx.strokeStyle = '#555';ctx.lineWidth =1;
    ctx.moveTo(centerX - Math.cos(angle2)*radius,centerY + 0.25*h);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY + 0.25*h);

    ctx.moveTo(centerX - Math.cos(angle2)*radius,centerY + 0.5*h);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY + 0.5*h);

    ctx.moveTo(centerX - Math.cos(angle2)*radius,centerY + 0.75*h);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY + 0.75*h);

    ctx.stroke();
    ctx.closePath();


    ctx.beginPath();
    ctx.moveTo(centerX - Math.cos(angle2)*radius,centerY);
    ctx.lineTo(centerX,centerY + Math.sin(angle1)*radius);
    ctx.lineTo(centerX,centerY + Math.sin(angle2)*radius);
    ctx.lineTo(centerX - Math.cos(angle1)*radius,centerY);

    var grd = ctx.createLinearGradient(centerX - Math.cos(angle2)*radius,centerY,
    centerX,centerY + Math.sin(angle2)*radius);
    grd.addColorStop(0.25,'green');
    grd.addColorStop(0.5,'yellow');
    grd.addColorStop(0.75,'orange');
    grd.addColorStop(1,'red');
    ctx.fillStyle = grd;
    ctx.fill();
    ctx.closePath();

    ctx.beginPath();
    ctx.moveTo(centerX + Math.cos(angle2)*radius,centerY);
    ctx.lineTo(centerX,centerY+Math.sin(angle1)*radius);
    ctx.lineTo(centerX,centerY+ Math.sin(angle2)*radius);
    ctx.lineTo(centerX + Math.cos(angle1)*radius,centerY);

    var grd = ctx.createLinearGradient(centerX + Math.cos(angle2)*radius,centerY,
    centerX,centerY + Math.sin(angle2)*radius);
    grd.addColorStop(0.25,'green');
    grd.addColorStop(0.5,'yellow');
    grd.addColorStop(0.75,'orange');
    grd.addColorStop(1,'red');
    ctx.fillStyle = grd;
    ctx.fill();
    ctx.closePath();

    //label
    ctx.beginPath();
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.font = 1.5*vw + 'px Quicksand';
    ctx.fillText('Normal Level',centerX,centerY-0.5*vw);
    ctx.textBaseline = 'top';
    ctx.font = 1.5*vw + 'px Quicksand';
    ctx.fillText('Below Normal Level',centerX,centerY+0.5*vw);
    ctx.fillStyle='#ababab';ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.font = 1.8*vw + 'px Quicksand';
    ctx.fillText('A',centerX - Math.cos(angle2)*radius,centerY + 0.25*h);
    ctx.fillText('B',centerX - Math.cos(angle2)*radius,centerY + 0.5*h);
    ctx.fillText('C',centerX - Math.cos(angle2)*radius,centerY + 0.75*h);
    ctx.fillText('D',centerX - Math.cos(angle2)*radius,centerY + h);
    ctx.textAlign = 'right';
    ctx.fillText('Cerebral Blood Flow',centerX- Math.cos(angle2)*radius,centerY);

    //coma line
    ctx.moveTo(centerX,centerY+Math.sin(angle1)*radius);
    //ctx.arc(centerX,centerY+Math.sin(angle1)*radius,0.2*vw,0,2*Math.PI);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY+Math.sin(angle1)*radius);
    //ctx.arc(centerX + Math.cos(angle2)*radius,centerY+Math.sin(angle1)*radius,0.2*vw,0,2*Math.PI);
    ctx.moveTo(centerX + Math.cos(angle2)*radius,centerY+Math.sin(angle1)*radius);
    ctx.lineTo((centerX + Math.cos(angle2)*radius)-vw,centerY+Math.sin(angle1)*radius-vh);
    ctx.moveTo(centerX + Math.cos(angle2)*radius,centerY+Math.sin(angle1)*radius);
    ctx.lineTo((centerX + Math.cos(angle2)*radius)-vw,centerY+Math.sin(angle1)*radius+vh);
    ctx.lineWidth = 4;
    ctx.strokeStyle = 'red';ctx.fillStyle = 'red';
    ctx.stroke();ctx.fill();
    ctx.fillStyle='#ababab';ctx.textAlign = 'center';
    ctx.textBaseline = 'top';
    ctx.font = 1.8*vw + 'px Quicksand';
    ctx.fillText('Coma or Sudden Cardiac Death',centerX + Math.cos(angle2)*radius,
    centerY+Math.sin(angle1)*radius+vw);
    ctx.closePath();

    //syncope line
    ctx.beginPath();
    ctx.moveTo(centerX,centerY+Math.sin(angle1)*radius);
    //ctx.arc(centerX,centerY+Math.sin(angle1)*radius,0.2*vw,0,2*Math.PI);
    ctx.lineTo(centerX + Math.cos(angle2)*radius,centerY);
    //ctx.arc(centerX + Math.cos(angle2)*radius,centerY,0.2*vw,0,2*Math.PI);
    ctx.moveTo(centerX + Math.cos(angle2)*radius,centerY);
    ctx.lineTo(centerX + Math.cos(angle2)*radius - 0.5*vw ,centerY + 1.8*vh);
    ctx.moveTo(centerX + Math.cos(angle2)*radius,centerY);
    ctx.lineTo(centerX + Math.cos(angle2)*radius - 1.8*vh ,centerY - 0.5*vw);
    ctx.lineWidth = 4;
    ctx.strokeStyle = '#d1ffbd';ctx.fillStyle = '#d1ffbd';
    ctx.font = 2*vw + 'px Quicksand';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'bottom';
    ctx.fillText('SYNCOPE',centerX + Math.cos(angle2)*radius,centerY-vw);
    ctx.stroke();ctx.fill();
    
}

function canvas1(){
    const ctx = canvas[1].getContext("2d");
    const scale = window.devicePixelRatio;
    canvas[1].style.width = window.innerWidth + 'px';
    canvas[1].style.height = 0.8*window.innerHeight + 'px';
    canvas[1].width = Math.floor(window.innerWidth * scale*1);
    canvas[1].height = Math.floor(0.8*window.innerHeight * scale*1);
    ctx.scale(scale*1,scale*1);

    const radius = 30*vmin;
    const centerX = 50*vw;
    const centerY = 40*vh;
    const min = 0.4;
    const max = 0.6;
    const maxStep = 20;
    var gap = 0;
    var left = min;
    var fwd = 0.01;
    var step = 0;

    var gd = 0;
    var fire = getFireGrd(1,centerX,centerY,radius,1);
    var ice = getIceGrd(1,centerX,centerY,radius,1);

    setInterval(() => {
        ctx.clearRect(0,0,100*vw,100*vh);
        var leftGd = ctx.createLinearGradient(centerX,centerY+radius,centerX,centerY-radius);
        majorLabel(1,centerX,centerY,radius,'#e2faff')
        drawLeft(1,centerX,centerY,radius, left-gap,fire);
        drawRight(1,centerX,centerY,radius,1-left-gap,ice);   
        left = left + fwd; 
        step++;
        gd = step/25;

        if (left>max){
            left=max;
        }
        if (left<min){
            left=min;
        }
        if (step>maxStep){
            step = 0;
            if (left>=max){fwd = -0.01;}
            if (left<=min){fwd = 0.01;}
        }
    }, 200);
}

function canvas0(){
    const ctx = canvas[0].getContext("2d");
    const scale = window.devicePixelRatio;
    canvas[0].style.width = window.innerWidth + 'px';
    canvas[0].style.height = 0.42* window.innerHeight + 'px';
    canvas[0].width = Math.floor(window.innerWidth * scale*1);
    canvas[0].height = Math.floor(0.42*window.innerHeight * scale*1);
    ctx.scale(scale*1,scale*1);

    const radius = 5*vw;
    const centerX = 50*vw;
    const centerY = 25*vh;

    //baseAnimation
    //0.45-0.55
    const min = 0.4;
    const max = 0.6;
    const maxStep = 20;
    var gap = 0;
    var left = min;
    var fwd = 0.01;
    var step = 0;

    var gd = 0;


    setInterval(() => {
        ctx.clearRect(0,0,100*vw,100*vh);
        var leftGd = ctx.createLinearGradient(centerX,centerY+radius,centerX,centerY-radius);
        leftGd.addColorStop(gd, '#1c444c');
        leftGd.addColorStop(1, '#3F9DA4')
        drawLeft(0,centerX,centerY,radius, left-gap,leftGd);
        drawRight(0,centerX,centerY,radius,1-left-gap,'#e2fcff');   
        left = left + fwd; 
        step++;
        gd = step/25;

        if (left>max){
            left=max;
        }
        if (left<min){
            left=min;
        }
        if (step>maxStep){
            step = 0;
            if (left>=max){fwd = -0.01;}
            if (left<=min){fwd = 0.01;}
        }
    }, 200);

}

function drawLeft(key,centerX,centerY,radius,ratio,color){
    const ctx = canvas[key].getContext("2d");
    //arc left
    ctx.beginPath();
    ctx.arc(centerX,centerY+(radius*(1-ratio)),radius*ratio, 1.5*Math.PI, 0.5*Math.PI);
    ctx.arc(centerX,centerY, radius, 0.5 * Math.PI, 1.5 * Math.PI);
    ctx.arc(centerX,centerY-(radius*ratio),radius*(1-ratio), 1.5*Math.PI, 0.5*Math.PI,true);
    ctx.fillStyle = color;
    ctx.fill();
    ctx.closePath();
}

function drawRight(key,centerX,centerY,radius,ratio,color){
    const ctx = canvas[key].getContext("2d");
    //arc right
    ctx.beginPath();
    ctx.arc(centerX,centerY-(radius*(1-ratio)),radius*ratio,0.5*Math.PI,1.5*Math.PI);
    ctx.arc(centerX,centerY,radius, 1.5*Math.PI,0.5*Math.PI);
    ctx.arc(centerX,centerY+(radius*ratio),radius*(1-ratio),0.5*Math.PI,1.5*Math.PI,true);
    ctx.fillStyle = color;
    ctx.fill();
    ctx.closePath()
}

function getFireGrd(key,centerX,centerY,radius,hot){
    const ctx = canvas[key].getContext("2d");
    const fireColor = ['#801100','#b62203','#d73502','#fc6400','#ff7500','#FAC000'];
    const fire = ctx.createLinearGradient(centerX,centerY+radius,centerX,centerY-radius);
    for (let index = 0; index < fireColor.length; index++) {
        var hotFactor = (hot + index)/10;
        if (hotFactor>1){hotFactor =1}
        fire.addColorStop(hotFactor, fireColor[index]);
    }
    return fire;
}

function getIceGrd(key,centerX,centerY,radius,cold){
    const ctx = canvas[key].getContext("2d");
    const iceColor = ['#3f7eb3','#6ba7cc','#aedbf0','#fafeff','#e2fcff','#cbf1fa'];
    const ice= ctx.createLinearGradient(centerX,centerY+radius,centerX,centerY-radius,);
    for (let index = 0; index < iceColor.length; index++) {
        var coldFactor = (cold + index)/10;
        if (coldFactor>1){coldFactor =1}
        ice.addColorStop(coldFactor, iceColor[index]);
    }
    return ice;
}

function majorLabel(key,centerX,centerY,radius,color){
    const ctx = canvas[key].getContext("2d");
    //angle from midline
    const angle = 25;
    //left 
    const fontSize = 2*vw;
    const xLeft = centerX + Math.cos(Math.PI * (90+angle)/180) * radius - 0.5*fontSize;
    const yLeft = centerY + Math.sin(Math.PI * (90+angle)/180) * radius;
    ctx.beginPath();
    ctx.font = fontSize + 'px Quicksand';
    ctx.textBaseline = 'middle';
    ctx.textAlign = 'right';ctx.fillStyle = color
    ctx.fillText('Sympathetic',xLeft-fontSize,yLeft);

    //right
    const xRight = centerX + Math.cos(Math.PI * (90-angle)/180) * radius + 0.5*fontSize;
    const yRight = centerY + Math.sin(Math.PI * (90-angle)/180) * radius;
    ctx.textAlign = 'left';
    ctx.fillText('Parasympathetic',xRight+fontSize,yRight);

    ctx.font = 0.7*fontSize + 'px Quicksand';
    ctx.textAlign = 'right';
    ctx.fillText('nervous system',xLeft-fontSize,yLeft+0.7*fontSize);
    ctx.textAlign = 'left';
    ctx.fillText('nervous system',xRight+fontSize,yRight+0.7*fontSize);
}

</script>
</body>
</html>